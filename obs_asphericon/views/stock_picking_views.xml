<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="stock_picking_view_delivery" model="ir.ui.view">
        <field name="name">stock.picking.view.delivery.form.inherit</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='move_ids_without_package']/tree/field[@name='product_uom_qty']" position="before">
                <field name="order_description" optional="hide"/>
            </xpath>
            <xpath expr="//header" position="after">
                    <div attrs='{"invisible": [("is_earlier", "=", False)]}' class="alert alert-danger" role="status">
                    <center>
                        <strong>Caution! Current Date is earlier than the Scheduled Date.</strong>
                    </center>
                    <field name="is_earlier" invisible="1" />
                </div>
            </xpath>
            <xpath expr="//field[@name='move_type']" position="after">
                <label for="shipping_info_id"/>
                <div class="o_row">
                    <field name="shipping_info_id" options='{"no_open": True, "no_create": True}' />
                    <field name="number" nolabel="1"/>
                </div>
            </xpath>
        </field>
    </record>

    <!--    Inherited Stock Picking tree view-->
    <record id="stock_picking_view_delivery_tree_inherit_obs_asphericon" model="ir.ui.view">
        <field name="name">stock.picking.view.delivery.tree.inherit.obs.asphericon</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.vpicktree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='date_deadline']" position="after">
                <field name="date_done" optional="hide" string="Effective Date"/>
            </xpath>
            <xpath expr="//field[@name='scheduled_date']" position="attributes">
                <attribute name="decoration-warning">state not in ('done', 'cancel') and scheduled_date &lt; now</attribute>
                <attribute name="decoration-danger">state not in ('done', 'cancel') and scheduled_date &lt; current_date</attribute>
                <attribute name="decoration-bf">state not in ('done', 'cancel') and (scheduled_date &lt;current_date or scheduled_date &lt; now)</attribute>
                <attribute name="widget"></attribute>
            </xpath>
            <xpath expr="//field[@name='date_deadline']" position="attributes">
                <attribute name="decoration-warning">state not in ('done', 'cancel') and date_deadline &lt; now</attribute>
                <attribute name="decoration-danger">state not in ('done', 'cancel') and date_deadline &lt; current_date</attribute>
                <attribute name="decoration-bf">state not in ('done', 'cancel') and (date_deadline &lt;current_date or date_deadline &lt; now)</attribute>
                <attribute name="widget"></attribute>
            </xpath>
        </field>
    </record>

</odoo>